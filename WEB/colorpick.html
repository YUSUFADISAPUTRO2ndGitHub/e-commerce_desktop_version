<!DOCTYPE html>
<html>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <style>
        img{
            position: fixed;
            /* bottom: 0; */
            /* right: 0; */
            top:0;
            left:10%;
        }
        #status{
            position: absolute;
            top: 50%;
            left: 50%;
            border:1px solid black;
        }
    </style>
<body>
    <img id="scream" width="220" height="277" src="./img//ads_panjang2.png" alt="The Scream" onclick="test(e)">
    <canvas id="example" width="220" height="277" ></canvas>
    <div id="status"></div>
</body>
<script>
    // set up some sample squares with random colors
    var example = document.getElementById('example');
    var context = example.getContext('2d').getImageData(0,0);
    var img = document.getElementById("scream");
    context.drawImage(img, 0, 0);
    context.fillStyle = randomColor();
    context.fillRect(0, 0, 50, 50);
    context.fillStyle = randomColor();
    context.fillRect(55, 0, 50, 50);
    context.fillStyle = randomColor();
    context.fillRect(110, 0, 50, 50);

    // $('example').on('mouseover',function(){
    //     var pos = findPos(this);
    //     var x = e.pageX - pos.x;
    //     var y = e.pageY - pos.y;
    //     var coord = "x=" + x + ", y=" + y;
    //     // alert(coord)
    //     var c = this.getContext('2d').getImageData;
    //     console.log(c)
    //     var p = c.getImageData(x, y, 1, 1).data; 
    //     alert(coord)
    //     var hex = "#" + ("000000" + rgbToHex(p[0], p[1], p[2])).slice(-6);
    //     $('#status').html(coord + "<br>" + hex);
    // })

    const test=(e)=>{
        // var pos = findPos(this);
        // var x = e.pageX - pos.x;
        // var y = e.pageY - pos.y;
        // var coord = "x=" + x + ", y=" + y;
        // // alert(coord)
        // var c = this.getContext('2d');
        // console.log(c)
        // var p = c.getImageData(x, y, 1, 1).data; 
        // alert(coord)
        // var hex = "#" + ("000000" + rgbToHex(p[0], p[1], p[2])).slice(-6);
        // $('#status').html(coord + "<br>" + hex);
    }
    
    $('#example').mousemove(function(e) {
        // alert('jalan')
        var pos = findPos(this);
        var x = e.pageX - pos.x;
        var y = e.pageY - pos.y;
        var coord = "x=" + x + ", y=" + y;
        // alert(coord)
        var c = this.getContext('2d').getImageData(0,0);
        console.log(c)
        var p = c.getImageData(x, y, 1, 1).data; 
        // alert(coord)
        var hex = "#" + ("000000" + rgbToHex(p[0], p[1], p[2])).slice(-6);
        $('#status').html(coord + "<br>" + hex);
    });
    
    function findPos(obj) {
        var curleft = 0, curtop = 0;
        if (obj.offsetParent) {
            do {
                curleft += obj.offsetLeft;
                curtop += obj.offsetTop;
            } while (obj = obj.offsetParent);
            return { x: curleft, y: curtop };
        }
        return undefined;
    }
    
    function rgbToHex(r, g, b) {
        if (r > 255 || g > 255 || b > 255)
            throw "Invalid color component";
        return ((r << 16) | (g << 8) | b).toString(16);
    }
    
    function randomInt(max) {
      return Math.floor(Math.random() * max);
    }
    
    // function randomColor() {
    //     return `rgb(${randomInt(256)}, ${randomInt(256)}
    
    // }
function randomColor(){
    return `rgb(${randomInt(256)}), ${randomInt(256)}`
}

</script>    
