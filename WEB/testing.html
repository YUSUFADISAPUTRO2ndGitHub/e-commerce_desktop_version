<!DOCTYPE html>
<html>
    <head>
        <!-- <link rel="stylesheet" href="../mobile_browser_adjustment.css"> -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
        <script src="./js/accessingAccurateAPIsGroup1.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
        <script src="./js/product_details.js"></script>
        <script src="./js/expressCheckout.js"></script>
        <script src="./js/sweetalert.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="./js/inputChecker.js"></script>
        <script src="./js/time.js"></script>
        <script src="./js/navigation.js"></script>
        <script src="./js/language_translator.js"></script>
        <!-- <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script async defer crossorigin="anonymous" src="https://connect.facebook.net/id_ID/sdk.js#xfbml=1&version=v9.0" nonce="W4kcd74M"></script>
    </head>
<style>

    /* width */
    ::-webkit-scrollbar {
        width: 5px;
    }

    /* Track */
    ::-webkit-scrollbar-track {
        background: #f1f1f1; 
    }
    
    /* Handle */
    ::-webkit-scrollbar-thumb {
        background: #37ced5; 
    }
    
    .red-vantsing-text{
        color: #37ced5;
    }
    .grey-vantsing-text{
        color: gray;
    }
    body{
        background-color: grey;
    }
    .centering{
        display: table;
        margin: auto;
    }

    /* local */
    table {
        width: 100%;
        border-collapse: collapse;
        background-color: transparent;
    }

    .main-structure {
        position: relative;
        top: -0.5px;
        left: -0.5px;
        width: 100%;
        height: 100vh;
        border-collapse: collapse;
        text-align: left;
    }
    .top-structure-header{
        position: fixed;
        z-index: 2;
        height: 5%;
        width: 100%;
        text-align: center;
        background-color: white;
    }

    .bottom-structure{
        height: auto;
    }
    .category-icon-background{
        display: table;
        margin: auto;
        border-radius: 50%;
        background-color: #FFE9D0;
        width: 60%;
    }
    .category-icon{
        width: 100%;
        padding: 10%;
    }
    .notification {
        position: relative;
        display: inline-block;
    }
    .notification .homemade-badge {
        position: absolute;
        top: 0px;
        right: 0px;
        padding: 2.5px 5px;
        border-radius: 50%;
        background-color: #FFE9D0 !important;
        font-size: x-small;
    }
    .category-icon-badge{
        display: table;
        margin: auto;
        border-radius: 50%;
        background-color: #FFE9D0;
        width: 20%;
    }
    .card{
        border: none;
        border-radius: 0px;
        background-color: white;
        margin-top: 1%;
    }
    .card:hover{
        border-top: 3px solid #217384;
        border-bottom: 3px solid #217384;
    }
    .directory-explainator{
        text-align: center;
        opacity: 0.5 !important;
    }
    .active{
        background-color: #d4dee8;
        opacity: 1 !important;
        border-radius: 10px;
    }
    .product-details-button{
        width: 100%;
        border: none;
        padding-left: 20px;
        padding-right: 20px;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    .product-details-button-main{
        width: 50%;
        float: left;
    }
    .add-cart-button{
        background-color: white;
        color: black;
        /* text-shadow: 0 0 10px white, 0 0 20px green, 0 0 30px green, 0 0 40px green, 0 0 50px green, 0 0 60px green, 0 0 70px green; */
    }
    .generate-group-buy-button{
        background-color: #217384;
        color: white;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        transition: transform 1s;
        border-radius: 10px;
    }
    .group-code-generated{
        border: solid 1px #217384;
        display: none ;
    }
    .choose-group-code{
        border: solid 1px #217384;
        background-color: lightgray;
    }
    a{
        text-decoration: none;
        color: green;
    }
    .independent-cart-icon{
        width: 15px;
        border-radius: 0% !important;
    }
    .independent-voucher-icon{
        width: 30px;
        border-radius: 0% !important;
    }
    .independent-share-wa-icon{
        width: 20px;
        border-radius: 0% !important;
    }
    .btn-success{
        display: table;
    }
    #main-name{
        color: #217384;
        text-transform: uppercase;
        text-align: center;
        background-color: white;
        border-radius: 10px;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        padding: 5%;
        
    }
    #group-code-selection{
        border: red 3px solid;
    }
    #main-period{
        font-size: 25px;
        border-radius: 10px;
        text-transform: uppercase;
        font-weight: bold;
        color: #37ced5;
    }
    #link-app{
        color: darkorange;
    }

    /* MODAL */
    /* The Modal (background) */
    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 98; /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal Content */
    .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 98%;
    }

    /* The Close Button */
    .close {
        color: white;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }


    .payment-received{
        display: none;
    }
    #payment-not-received{
        display: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }
    .join-status-of-group-buy{
        display: none;
    }
    #address-selection-sub-saved-address{
        display: block;
        text-align: left;
    }
    #new-address-section{
        display: none;
        text-align: left;
    }
    .card-img-top{
        border: none !important;
    }
    label{
        color:#217384;
        font-weight: bold;
    }
    .quick-add-to-cart{
        background-color: #37ced5;
        color: white;
        border-radius: 10px;
        border: none;
        padding: 5px;
        padding-left: 10px;
        padding-right: 10px;
    }
    .hidden-forever{
        display: none;
    }
    /* .centered{
        display: table;
        margin: auto;
    } */
    .notification{
        position: fixed;
        display: none; /* temporary disabled */
        animation-name: example;
        animation-duration: 10s;
        animation-iteration-count: 1;
        z-index: 5;
        top:-500px;
    }

    @keyframes example {
        0%   {top:-500px}
        25% {top:0px}
        75% {top:0px}
        100% {top:-500px}
    }
    .rating-star{
        width: 22px;
        float: left;
    }
    .rating-star-section{
        display: none;
    }
    .list-group-item{
        width:100% !important;
        border-radius: 0 !important;
        border: none;
        background-color: transparent;
        padding: 0;
        max-width: 50%;
    }
    .product-card{
        border: none;
        border-radius: 10px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        background-color: #ebf1f4;
        color:#217384;
        max-height: 200px;
        min-height: 200px;
        margin: 2%;
    }
    .product-card-images{
        border-radius: 10px 10px 0 0;
        width: 100%;
        max-height:170px;
        min-height:170px;
    }
    .product-card-name{
        white-space: nowrap; 
        width: 170px; 
        overflow: hidden;
        text-overflow: ellipsis; 
    }
    .Highlighted-options{
        text-align: center;
        padding: 10px;
        background-color: #edf1f4;
        color: #217384;
        border:none;
        border-radius: 10px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }
    #Highlighted-options{
        border:none;
        background-color: white;
    }
    .rating-bar{
        display: none;
        width: 30%;
    }
    .product-details{
        display: block;
    }
    #love{
        position:absolute;
        top: 5%;
        right: 5%;
        z-index: 8;
    }
    .progress-bar{
        background-color: #217384;
    }
    .rating-stars-iframe{
        width: 100%;
        height: 30px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        border-radius: 10px;
    }
    #modal-group-purchase{
        z-index: 98;
    }
    .glowing-box{
        height:300px;
        width:100%;
        /* border:10px solid; */
    }
    .glowing::before{
    content: '';
    position: absolute;
    left: -2px;
    top: -2px;
    background: linear-gradient(45deg, #217384, #4BACE5, #37CED5, #D4DEE8, #EBF1F4, #217384, #4BACE5, #37CED5, #EBF1F4);
    background-size: 400%;
    width: calc(100% + 5px);
    height: calc(100% + 5px);
    z-index: -1;
    animation: glower 20s linear infinite;
    }

    @keyframes glower {
    0% {
        background-position: 0 0;
    }
    
    50% {
        background-position: 400% 0;
    }
    
    100% {
        background-position: 0 0;
    }
    }


    .modal-content{
        border-radius: 10px !important;
        background-color: #217384 !important;
        color: white !important;
    }
    .alert-primary{
        background-color: #217384;
        color: white;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        border-radius: 10px;
    }
    .form-control{
         background-color: white;
         color: #217384;
         border: none;
         border-radius: 10px;
         box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }
    .btn-primary{
        background-color: white;
        color: #217384;
        border-radius: 30px;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }
    .courier-area{
        background-color: #217384;
        color: white;
        border-radius: 30px;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }
    .center-text{
        text-align: center;
    }
    .swal-custom, .swal2-title, .swal2-container{
        background-color: white;
        color: #217384 ;
        border: none;
    }
    .swal2-timer-progress-bar{
        display: none !important;
    }
    .swal2-loader{
        /* border-width: 0 !important;
        background-color: #217384;
        border-style: none !important; */
        display: none !important;
    }
    .swal2-backdrop-show{
        background-color: white !important;
    }
    .user-options-to-add-to-cart{
        background-color: white;
        color: #217384;
        border-radius: 10px;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        padding: 3%;
    }
    #main-available-stock{
        margin: 1%;
        width: 30%;
        text-align: center;
        color: #217384;
        border-radius: 10px;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        padding: 2%;
    }
    #modal-add-to-cart{
        z-index: 98;
    }

    .main-control-panel{
        background-color: white;
        border-radius: 10px;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        padding: 5%;
        display: flex;
        flex-direction: row;
    }
    .main-control-panel-search-button{
        padding: 3%;
        text-align: center;
        color: white;
        background-color: #37CED5;
        border-radius: 10px;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        margin: 1%;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .main-control-panel-add-to-cart{
        padding: 3%;
        text-align: center;
        color: white;
        background-color: #217384;
        border-radius: 10px;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        margin: 1%;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .main-price-listed{
        margin: 1%;
        width: 100%;
        color: #217384;
        background-color: white;
        border-radius: 10px;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        padding: 5%;
        text-align: center;
    }
    #main-price{
        color: #37CED5;
    }

    .product-selection-images{
        min-width: 100%;
        max-width: 100%;
        max-height: 280px;
        min-height: 280px;
    }
    .product-selection-names{
        width: 100%;
        /* white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis; */
    }
    .btn-success{
        width: 100%;
        border-radius: 10px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }
    .list-options-available-title{
        text-align: center;
        padding: 2%;
        border-radius: 10px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        margin-bottom: 2%;
    }
    .selected-option{
        border: solid 2px darkred;
        border-radius: 10px;
    }
    .form-check .form-check-input {
        float: none;
        margin-left: 0;
    }
    .main-information{
        display: flex;
        flex-direction: row;
    }

    .group-buy-status-area{
        border-radius: 10px;
        border: none;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        padding: 3%;
        text-align: center;
    }

    








    .yusuf-loader {
        width: 2.5em;
        height: 2.5em;
        transform: rotate(165deg);
    }
    .yusuf-loader:before, .yusuf-loader:after {
        content: '';
        display: block;
        height: 0.5em;
        border-radius: 0.25em;
    }
    .yusuf-loader:before {
        animation: before 2s infinite;
    }
    .yusuf-loader:after {
        animation: after 2s infinite;
    }

    @keyframes before {
        0% {
            width: 0.5em;
            box-shadow: 1em -0.5em #217384, -1em 0.5em #4bace5;
        }
        35% {
            width: 2.5em;
            box-shadow: 0 -0.5em #217384, 0 0.5em #4bace5;
        }
        70% {
            width: 0.5em;
            box-shadow: -1em -0.5em #217384, 1em 0.5em #4bace5;
        }
        100% {
            box-shadow: 1em -0.5em #217384, -1em 0.5em #4bace5;
        }
    }
    @keyframes after {
        0% {
            height: 0.5em;
            box-shadow: 0.5em 1em #37ced5, -0.5em -1em #d4dee8;
        }
        35% {
            height: 2.5em;
            box-shadow: 0.5em 0 #37ced5, -0.5em 0 #d4dee8;
        }
        70% {
            height: 0.5em;
            box-shadow: 0.5em -1em #37ced5, -0.5em 1em #d4dee8;
        }
        100% {
            box-shadow: 0.5em 1em #37ced5, -0.5em -1em #d4dee8;
        }
    }
    
    .iframe-user-comments{
        width: 100%;
        min-height: 200px;
        max-height: 500px;
    }
    .main-control-panel-float{
        position: fixed;
        bottom: 0;
        left: 0;
        z-index: 97;
        width: 100%;
        margin: 0;
        border-radius: 10px 10px 0 0;
        background-color: lightblue;
        transition: 1s;
    }
    .hide-unhide-main-control-panel-float{
        text-align: center;
        position: absolute;
        width: 100%;
        top: -2%;
        left: 50%;
        margin-left: -50%;
        color: white;
        text-shadow: 2px 2px 5px black;
        font-size: 18px;
    }
    .product-option-dropdown{
        display: none;
    }
    
    .address-detail-dropdown{
        display: none;
    }
</style>
<body>

    <!-- Modal -->
    <div id="modal-add-to-cart" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="list-options-available-title">
                <span id="lang-product-detail-16">Pilihan Berhubungan</span>
            </div>
            <div class="user-options-to-add-to-cart card-text list-options-available">

            </div>
            <br>
            <div class="user-options-to-add-to-cart card-text">
                <div class="mb-3">
                    <img class="product-selection-images" src="">
                    <br>
                    <label class="form-label"><span id="lang-product-detail-17">Tersedia digudang kami</span></label>
                    <input type="number" class="form-control requested-available-stock-by-user" value="0" disabled>
                    <br>
                    <label class="form-label"><span id="lang-product-detail-18">Harga satuan</span></label>
                    <input type="number" class="form-control requested-price-by-user" value="0" disabled>
                    <br>
                    <label class="form-label"><span id="lang-product-detail-19">Kuantitas permintaan</span></label>
                    <input type="number" class="form-control requested-quantity-by-user" value="1">
                    <div class="form-text"><span id="lang-product-detail-20">Masukkan jumlah yang diinginkan untuk dimasukan kekeranjang</span></div>
                    <button type="button" class="btn btn-success" onclick="addToCartDirectlyFromProductDetails()"><span id="lang-product-detail-21">add to cart</span></button>
                </div>
            </div>
        </div>
    </div>



    <!-- The Modal -->
    <div id="modal-group-purchase" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="alert alert-primary" role="alert">
                <span id="lang-product-detail-22">KUANTITAS BARANG</span>
            </div>
            <div class="form-group">
                <input type="number" class="form-control quantity-express-buy" value=1 onchange="checkQuantityBuyLimit(this)">
            </div>
            <br>
            <div class="alert alert-primary" role="alert">
                <span id="lang-product-detail-23">METODE PEMBAYARAN</span>
            </div>
            <select class="form-control" id="payment-selection">
                <!-- <option>BCA VA TRANSFER</option> -->
            </select>
            <br>
            <div class="alert alert-primary" role="alert">
                <span id="lang-product-detail-24">PENGIRIMAN KE ALAMAT</span>
            </div>
            <select class="form-control" id="address-selection" onchange="addressOptionSelected(this)">
                <option>TO SAVED ADDRESS</option>
                <option>DELIVER TO NEW ADDRESS</option>
            </select>
            <div class="form-group" id="address-selection-sub-saved-address">
                <br>
                <div class="alert alert-primary" role="alert">
                    <span id="lang-product-detail-25">PILIH ALAMAT TERSIMPAN</span>
                </div>
                <select class="form-control" id="sub-saved-address" onchange="change_bellow_options(this)">
                </select>
            </div>
            <div class="form-group" id="new-address-section">
                <label><span id="lang-product-detail-26">Alamat Pengiriman Anda</span></label>
                <textarea id="street" class="form-control" placeholder="Pastikan untuk menuliskan Kota dan Provinsi" onchange="checkingSpecialCharacter(this)" rows="3" required></textarea>
            </div>
            <br>
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong>Pastikan Anda memasukkan informasi dengan benar di bawah ini untuk pengiriman</strong>, pilih opsi yang sesuai dengan alamat penerima Anda.
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <div class="card courier-area">
                <div class="card-body">
                    <!-- <div>Pastikan Anda memasukkan informasi di bawah ini untuk pengiriman, pilih opsi yang sesuai dengan alamat penerima Anda.</div> -->
                    <div class="address-detail-dropdown">
                        <div class="input-group mb-3">
                            <label class="input-group-text"><span id="lang-product-detail-27">Kurir</span></label>
                            <select class="form-select" id="Courier-option" onchange="updated_courier(this)">
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="input-group-text"><span id="lang-product-detail-28">Pilihan packaging pengiriman</span></label>
                            <select class="form-select" id="shipping-packaging-courier-option" onchange="pallet_packaging_request()">
                            </select>
                        </div>
                        <div class="input-group mb-3">
                            <label class="input-group-text"><span id="lang-product-detail-29">Provinsi</span></label>
                            <select class="form-select" id="province-courier-option" onchange="updated_province_courier(this)">
                                <option>One</option>
                                <option>Two</option>
                                <option>Three</option>
                            </select>
                        </div>
                        <div class="input-group mb-3">
                            <label class="input-group-text"><span id="lang-product-detail-30">Kota</span></label>
                            <select class="form-select" id="city-courier-option" onchange="updated_city_courier(this)">
                                <option>One</option>
                                <option>Two</option>
                                <option>Three</option>
                            </select>
                        </div>
                        <div class="input-group mb-3">
                            <label class="input-group-text"><span id="lang-product-detail-31">Kecamatan</span></label>
                            <select class="form-select" id="district-courier-option" onchange="updated_district_courier(this)">
                                <option>One</option>
                                <option>Two</option>
                                <option>Three</option>
                            </select>
                        </div>
                        <div class="input-group mb-3">
                            <label class="input-group-text"><span id="lang-product-detail-32">Kelurahan</span></label>
                            <select class="form-select" id="subdistrict-courier-option" onchange="updated_subdistrict_courier(this)">
                                <option>One</option>
                                <option>Two</option>
                                <option>Three</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text"><span id="lang-product-detail-33">Zipcode</span></span>
                        <select class="form-select" id="zipcode-courier-option">
                            <option>One</option>
                            <option>Two</option>
                            <option>Three</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="input-group-text"><span id="lang-product-detail-34">Pilihan Harga Pengiriman</span></label>
                        <select class="form-select" id="shipping-fee-courier-option" onchange="update_estimated_shipping_fee()">
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="input-group-text"><span id="lang-product-detail-35">Pilihan asuransi pengiriman</span></label>
                        <select class="form-select" id="shipping-insurance-courier-option" onchange="update_estimated_shipping_fee()">
                        </select>
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text"><span id="lang-product-detail-36">Estimasi harga pengiriman:</span></span>
                        <span class="input-group-text" id="estimated-price-courier-option">0.00</span>
                    </div>
                    <div class="alert alert-danger alert-dismissible fade show" role="alert">
                        <strong>Harga pengiriman diatas</strong> hanyalah estimasi, jika terjadi penyesuaian harga pengiriman maka customer service kami akan menghubungin Anda untuk melalukan process lebih lanjut.
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                </div>
            </div>
            <br>
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong>Pastikan Anda memasukkan informasi dengan benar untuk pengiriman</strong>, pilih opsi yang sesuai dengan alamat penerimaan Anda.
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <br>
            <div class="center-text"><span id="lang-product-detail-37">Harga barang (belum termasuk harga kirim)</span></div>
            <input class="input-group-text" id="estimated-product-price" value="00" disabled></input>
            <br>
            <button type="button" class="btn btn-primary" onclick="confirmedPurchaseGroupBuy()"><span id="lang-product-detail-38">BUY NOW!</span></button>
        </div>
    
    </div>
    
    <table class="main-structure">
        <tr>
            <td class="bottom-structure" >
                <table>
                    <tr>
                        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                            <ol class="carousel-indicators">
                              <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                              <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                              <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                            </ol>
                            <div id="main-product-images" class="carousel-inner">
                            </div>
                            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                        <div class="card product-price" id="product-price">
                            <div class="card-body">
                                <div class="main-control-panel main-control-panel-float">
                                    <div class="hide-unhide-main-control-panel-float" onclick="hide_unhide_main_control_panel()">⥐</div>
                                    <div class="main-control-panel-add-to-cart" onclick="show_modal_quantity_requested('modal-add-to-cart')">
                                        <span id="lang-product-detail-1">Add to cart</span>
                                    </div>
                                    <div id="back-button" class="main-control-panel-search-button">
                                        <span id="lang-product-detail-2">Search more products</span>
                                    </div>
                                </div>
                                <div id="main-name"class="card-text">
                                </div>
                                <br>
                                <div class="main-information">
                                    <div class="main-price-listed">
                                        <h5 class="card-text">
                                            <span id="lang-product-detail-3">Harga: </span>
                                            <span id="main-price" class="card-text">RP. 25.000</span>
                                        </h5>
                                    </div>
                                    <div id="main-available-stock" class="card-text">
                                        0 tersisa
                                    </div>
                                </div>
                                <br>
                                <div class="main-price-listed card-text">
                                    <a class="share-target" href="https://api.whatsapp.com/send?text=Download app nya di https://play.google.com/store/apps/details?id=sold.co.id.ecommerce" target="_blank">
                                        <span id="lang-product-detail-4">Bagikan APP ini melalui </span><img class="independent-share-wa-icon" src="./img/Additional_icons/whatsapp.png" class="category-icon" >
                                    </a>
                                </div>
                                <br>
                                <iframe class="rating-stars-iframe" src="./rating-stars/index.html"></iframe>
                                <div class="input-group mb-3 product-option-dropdown">
                                    <div class="input-group-prepend">
                                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Options</button>
                                        <div class="dropdown-menu" id="product-option-dropdown">
                                            <!-- <div class="dropdown-item">Action</div> -->
                                        </div>
                                    </div>
                                    <input id="product-option-dropdown-name" type="text" class="form-control" disabled>
                                </div>
                            </div>
                        </div>
                    </tr>
                    <tr>
                        <div class="card join-status-of-group-buy main-group-buy">
                            <div class="card-body">
                                <div class="alert alert-success payment-received" role="alert">
                                    <span id="lang-product-detail-5">Kamu pernah membeli barang ini dengan group diskon</span>
                                    <!-- <div class="payment-received">and You have paid for this group buy order</div> -->
                                </div>
                                <div id="payment-not-received" class="alert alert-danger" role="alert">
                                    <span id="lang-product-detail-6">Kamu memiliki order untuk product ini yang belum dibayarkan
                                        Tolong periksa kembali pembayaran Anda</span>
                                </div>
                                <h5 class="card-title hidden-forever">Ongoing purchase <span id="group-purchase-quantity-target"></span></h5>
                                <h5 class="card-text payment-received">Kamu telah membeli sebanyak: <input type="number" id="group-purchase-quantity-ordered" disabled></input></h5>
                                <div class="group-buy-status-area">
                                    <div class="card-title main-group-buy">
                                        <span id="lang-product-detail-7">Harga Diskon</span>
                                        <img class="independent-voucher-icon" src="./img/Additional_icons/voucher.png" class="category-icon" >
                                    </div>
                                    <div id="main-period" class="card-text">
                                        RP. 23.750
                                    </div>
                                    <button id="discount-code" type="button" class="product-details-button generate-group-buy-button" onclick="generateGroupBuy(this)">
                                        <span id="lang-product-detail-8">Beli langsung dengan harga diskon</span>
                                    </button>
                                </div>
                                <br>
                                <div class="group-buy-status-area">
                                    <label class="main-group-buy"><span id="lang-product-detail-9">Buruan Beli Sekarang! dengan mengklik tombol Group-Diskon diatas!</span></label>
                                    <div class="progress main-group-buy">
                                        <div class="progress-bar" role="progressbar" style="width:0%">
                                            <span id="group-purchase-quantity-sofar"></span>
                                        </div>
                                    </div>
                                    <div class="card-text target-quantity main-group-buy"><span id="lang-product-detail-10">Telah Terjual Secara Group Diskon</span></div>
                                </div>
                            </div>
                        </div>
                    </tr>
                    <tr>
                        <div class="card product-price group-price">
                            <video class="d-block w-100" autoplay loop muted>
                                <source src="./img/ADS_SLIDES/videoplayback.mp4" type="video/mp4">
                            </video>
                        </div>
                        <div class="card product-price">
                            <div class="card-body">

                                <iframe class="iframe-user-comments" src="./user_comments.html?Product_Code="></iframe>

                                <h5 class="card-title"><span id="lang-product-detail-12">CASH ON DELIVERY</span></h5>
                                <p id="main-cod" class="card-text">
                                    RP. 25.000
                                </p>
                                <h5 class="card-title">
                                    <span id="lang-product-detail-13">HARGA PERIODE</span>
                                </h5>
                                <label><span id="lang-product-detail-14">Hanya tersedia melalui direct sales, silahkan hubungi customer service kami</span></label>
                                <p id="main-period-2" class="card-text">
                                    RP. 25.000
                                </p>
                            </div>
                        </div>
                    </tr>
                    <tr>
                        <div class="card product-details">
                            <div class="card-body">
                                <h5 class="card-title"><span id="lang-product-detail-15">Details</span></h5>
                                <p id="main-details" class="card-text">
                                    Tipe : H668; Spesifikasi : 300ml; 
                                    Warna Transparan; 
                                    Daya Tahan : 20 Tahun
                                </p>
                            </div>
                        </div>
                    </tr>
                    <tr>
                        <div class="card-body" id="Highlighted-options">
                            <h5 class="card-title Highlighted-options"><span id="lang-product-detail-11">More Options</span></h5>
                        </div>
                        <div class="other-product-area">
                        </div>
                    </tr>
                    <!-- <tr>
                        <div class="card product-terms">
                            <img class="card-img-top" src="./img/SAMPLE/terms.jpg">
                        </div>
                    </tr> -->
                </table>
            </td>
        </tr>
    </table>
</body>
<script>
    function hide_unhide_main_control_panel(){
        console.log($(`.main-control-panel-float`).css(`transform`));
        if($(`.main-control-panel-float`).css(`transform`) != `none`){
            $(`.main-control-panel-float`).css(`transform`, `none`);
            $(`.hide-unhide-main-control-panel-float`).html(`⥐`);
        }else{
            $(`.main-control-panel-float`).css(`transform`, `translateY(80%)`);
            $(`.hide-unhide-main-control-panel-float`).html(`⥎`);
        }
    }

    // Get the modal
    var modal1 = document.getElementById("modal-group-purchase");
    var modal2 = document.getElementById("modal-add-to-cart");
    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];
    var span1 = document.getElementsByClassName("close")[1];
    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        modal1.style.display = "none";
        modal2.style.display = "none";
    }
    span1.onclick = function() {
        modal1.style.display = "none";
        modal2.style.display = "none";
    }

    function change_bellow_options(x){
        var courier_information = $('#Courier-option').find(":selected").text().split("-");
        var Courier = courier_information[0];
        var Courier_Code = courier_information[1];
        var response = [{
            Courier : courier_information[0],
            Courier_Code : courier_information[1]
        }]
        // alert($(x).find(":selected").text());
        if(
            JSON.parse(localStorage.getItem("all_province_tiki")).length != 0
        ){
            var i = 0;
            var prov = JSON.parse(localStorage.getItem("all_province_tiki"));
            for(i ; i < prov.length; i ++){
                if($(x).find(":selected").text().toUpperCase().includes(prov[i].Province.toUpperCase())){
                    $("#province-courier-option").find(":selected").prop('selected', false);
                    $("#province-courier-option option").filter(function( index ) {
                        return $(this).text() === prov[i].Province;
                    }).prop('selected', true);
                    // alert($("#province-courier-option").find(":selected").text());
                    // change_bellow_options(document.getElementById("sub-saved-address"));
                    updated_province_courier(document.getElementById("province-courier-option"));
                }
            }
        }else{
            get_all_province_from_courier(response[0].Courier, response[0].Courier_Code).done(function (prov) {
                var i = 0;
                for(i ; i < prov.length; i ++){
                    if($(x).find(":selected").text().toUpperCase().includes(prov[i].Province.toUpperCase())){
                        $("#province-courier-option").find(":selected").prop('selected', false);
                        $("#province-courier-option option").filter(function( index ) {
                            return $(this).text() === prov[i].Province;
                        }).prop('selected', true);
                        // alert($("#province-courier-option").find(":selected").text());
                        // change_bellow_options(document.getElementById("sub-saved-address"));
                        updated_province_courier(document.getElementById("province-courier-option"));
                    }
                }
            })
        }
    }

    function change_city_selection_based_on_selected_province(x, province_selected){
        var courier_information = $('#Courier-option').find(":selected").text().split("-");
        var Courier = courier_information[0];
        var Courier_Code = courier_information[1];
        var response = [{
            Courier : courier_information[0],
            Courier_Code : courier_information[1]
        }]
        
        if(
            JSON.parse(localStorage.getItem("all_city_tiki")).length != 0
        ){
            var i = 0;
            var j = 0;
            var city = JSON.parse(localStorage.getItem("all_city_tiki"));
            console.log($(x).find(":selected").text());
            for(i ; i < city.length; i ++){
                for(j = 0; j < city[i].City.length; j ++){
                    if($(x).find(":selected").text().toUpperCase().includes(city[i].City[j].City.toUpperCase())){
                        console.log(city[i].City[j].City.toUpperCase());
                        $("#city-courier-option").find(":selected").prop('selected', false);
                        $("#city-courier-option option").filter(function( index ) {
                            return $(this).text() === city[i].City[j].City;
                        }).prop('selected', true);
                        updated_city_courier(document.getElementById("city-courier-option"));
                    }
                }
            }
        }else{
            get_all_city_from_courier(response[0].Courier, response[0].Courier_Code, province_selected).done(function (city) {
                console.log(city);
                var i = 0;
                for(i ; i < city.length; i ++){
                    if($(x).find(":selected").text().toUpperCase().includes(city[i].City.toUpperCase())){
                        $("#city-courier-option").find(":selected").prop('selected', false);
                        $("#city-courier-option option").filter(function( index ) {
                            return $(this).text() === city[i].City;
                        }).prop('selected', true);
                        updated_city_courier(document.getElementById("city-courier-option"));
                    }
                }
            })
        }
    }

    $( document ).ready(function() {
        // 
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const productid = urlParams.get('productid');

    });
    
    function initial_render_courier(){
        get_all_couriers().done(function (response) {
            $("#Courier-option").empty()
            var i = 0;
            for(i ; i < response.length;i++){
                $("#Courier-option").append(`<option>${response[i].Courier}-${response[i].Courier_Code}</option>`);
            }
            reset_all_shipping_information(response);
        });
    }

    function reset_all_shipping_information(response){
        if(
            (JSON.parse(localStorage.getItem("all_province_tiki")).length != 0)
        ){
            $("#province-courier-option").empty();
            var prov = JSON.parse(localStorage.getItem("all_province_tiki"));
            var i = 0;
            for(i ; i < prov.length;i++){
                $("#province-courier-option").append(`<option>${prov[i].Province}</option>`);
            }
            if(
                (JSON.parse(localStorage.getItem("all_city_tiki")).length != 0)
            ){
                $("#city-courier-option").empty();
                var cit = JSON.parse(localStorage.getItem("all_city_tiki"));
                var i = 0;
                for(i ; i < cit.length;i++){
                    for(z ; z < cit[i].length;z++){
                        if(cit[i].Province == prov[0].Province){
                            $("#city-courier-option").append(`<option>${cit[i].Province[z].City}</option>`);
                        }
                    }
                }
            }else{
                $("#city-courier-option").empty();
                get_all_city_from_courier(response[0].Courier, response[0].Courier_Code, prov[0].Province).done(function (cit) {
                    var i = 0;
                    for(i ; i < cit.length;i++){
                        $("#city-courier-option").append(`<option>${cit[i].City}</option>`);
                    }
                    $("#district-courier-option").empty();
                    get_all_district_from_courier(response[0].Courier, response[0].Courier_Code, cit[0].City).done(function (dis) {
                        var i = 0;
                        for(i ; i < dis.length;i++){
                            $("#district-courier-option").append(`<option>${dis[i].District}</option>`);
                        }
                        $("#subdistrict-courier-option").empty();
                        $("#zipcode-courier-option").empty();
                        get_all_subdistrict_from_courier(response[0].Courier, response[0].Courier_Code, dis[0].District).done(function (subdis) {
                            var i = 0;
                            for(i ; i < subdis.length;i++){//zipcode-courier-option
                                $("#subdistrict-courier-option").append(`<option>${subdis[i].Sub_District}</option>`);
                                if(subdis[i].Zipcode.length > 0){
                                    $("#zipcode-courier-option").append(`<option>${subdis[i].Zipcode}</option>`);
                                }
                            }
                            update_shipping_fee(subdis[0].Courier_Price_Code, "");
                            change_bellow_options(document.getElementById("sub-saved-address"));
                        });
                    });
                });
            }
            if(
                (JSON.parse(localStorage.getItem("all_district_tiki")).length != 0)
            ){
                $("#district-courier-option").empty();
                var i = 0;
                var dis = JSON.parse(localStorage.getItem("all_district_tiki"));
                for(i ; i < dis.length;i++){
                    for(z ; z < dis[i].length;z++){
                        if(dis[i].City == cit[0].City[0].City){
                            $("#district-courier-option").append(`<option>${dis[i].City[z].District}</option>`);
                        }
                    }
                }
            }else{
                $("#district-courier-option").empty();
                get_all_district_from_courier(response[0].Courier, response[0].Courier_Code, cit[0].City[0].City).done(function (dis) {
                    var i = 0;
                    for(i ; i < dis.length;i++){
                        $("#district-courier-option").append(`<option>${dis[i].District}</option>`);
                    }
                    $("#subdistrict-courier-option").empty();
                    $("#zipcode-courier-option").empty();
                    get_all_subdistrict_from_courier(response[0].Courier, response[0].Courier_Code, dis[0].District).done(function (subdis) {
                        var i = 0;
                        for(i ; i < subdis.length;i++){//zipcode-courier-option
                            $("#subdistrict-courier-option").append(`<option>${subdis[i].Sub_District}</option>`);
                            if(subdis[i].Zipcode.length > 0){
                                $("#zipcode-courier-option").append(`<option>${subdis[i].Zipcode}</option>`);
                            }
                        }
                        update_shipping_fee(subdis[0].Courier_Price_Code, "");
                        change_bellow_options(document.getElementById("sub-saved-address"));
                    });
                });
            }
            if(
                (JSON.parse(localStorage.getItem("all_subdistrict_tiki")).length != 0)
            ){
                $("#subdistrict-courier-option").empty();
                $("#zipcode-courier-option").empty();
                var i = 0;
                var subdis = JSON.parse(localStorage.getItem("all_subdistrict_tiki"));
                for(i ; i < subdis.length;i++){//zipcode-courier-option
                    for(z ; z < subdis[i].length;z++){
                        if(subdis[i].District == dis[0].District[0].District){
                            $("#subdistrict-courier-option").append(`<option>${subdis[i].District[z].Sub_District}</option>`);
                            $("#zipcode-courier-option").append(`<option>${subdis[i].District[z].Zipcode}</option>`);
                        }
                    }
                }
                update_shipping_fee(subdis[0].Courier_Price_Code, "");
                change_bellow_options(document.getElementById("sub-saved-address"));
            }else{
                $("#subdistrict-courier-option").empty();
                $("#zipcode-courier-option").empty();
                get_all_subdistrict_from_courier(response[0].Courier, response[0].Courier_Code, dis[0].District[0].District).done(function (subdis) {
                    var i = 0;
                    for(i ; i < subdis.length;i++){//zipcode-courier-option
                        $("#subdistrict-courier-option").append(`<option>${subdis[i].Sub_District}</option>`);
                        if(subdis[i].Zipcode.length > 0){
                            $("#zipcode-courier-option").append(`<option>${subdis[i].Zipcode}</option>`);
                        }
                    }
                    update_shipping_fee(subdis[0].Courier_Price_Code, "");
                    change_bellow_options(document.getElementById("sub-saved-address"));
                });
            }
        }else{
            $("#province-courier-option").empty();
            get_all_province_from_courier(response[0].Courier, response[0].Courier_Code).done(function (prov) {
                var i = 0;
                for(i ; i < prov.length;i++){
                    $("#province-courier-option").append(`<option>${prov[i].Province}</option>`);
                }
                $("#city-courier-option").empty();
                get_all_city_from_courier(response[0].Courier, response[0].Courier_Code, prov[0].Province).done(function (cit) {
                    var i = 0;
                    for(i ; i < cit.length;i++){
                        $("#city-courier-option").append(`<option>${cit[i].City}</option>`);
                    }
                    $("#district-courier-option").empty();
                    get_all_district_from_courier(response[0].Courier, response[0].Courier_Code, cit[0].City).done(function (dis) {
                        var i = 0;
                        for(i ; i < dis.length;i++){
                            $("#district-courier-option").append(`<option>${dis[i].District}</option>`);
                        }
                        $("#subdistrict-courier-option").empty();
                        $("#zipcode-courier-option").empty();
                        get_all_subdistrict_from_courier(response[0].Courier, response[0].Courier_Code, dis[0].District).done(function (subdis) {
                            var i = 0;
                            for(i ; i < subdis.length;i++){//zipcode-courier-option
                                $("#subdistrict-courier-option").append(`<option>${subdis[i].Sub_District}</option>`);
                                if(subdis[i].Zipcode.length > 0){
                                    $("#zipcode-courier-option").append(`<option>${subdis[i].Zipcode}</option>`);
                                }
                            }
                            update_shipping_fee(subdis[0].Courier_Price_Code, "");
                            change_bellow_options(document.getElementById("sub-saved-address"));
                        });
                    });
                });
            });
        }
    }
    
    function updated_courier(x){
        var courier_information = $('#' + x.id).find(":selected").text().split("-");
        var Courier = courier_information[0];
        var Courier_Code = courier_information[1];
        var response = [{
            Courier : courier_information[0],
            Courier_Code : courier_information[1]
        }]
        reset_all_shipping_information(response);
    }
   
    function updated_province_courier(x){
        var courier_information = $('#Courier-option').find(":selected").text().split("-");
        var Courier = courier_information[0];
        var Courier_Code = courier_information[1];
        var response = [{
            Courier : courier_information[0],
            Courier_Code : courier_information[1]
        }]
        $("#city-courier-option").empty();
        get_all_city_from_courier(response[0].Courier, response[0].Courier_Code, $('#' + x.id).find(":selected").text()).done(function (cit) {
            var i = 0;
            for(i ; i < cit.length;i++){
                $("#city-courier-option").append(`<option>${cit[i].City}</option>`);
            }
            $("#district-courier-option").empty();
            get_all_district_from_courier(response[0].Courier, response[0].Courier_Code, cit[0].City).done(function (dis) {
                var i = 0;
                for(i ; i < dis.length;i++){
                    $("#district-courier-option").append(`<option>${dis[i].District}</option>`);
                }
                $("#subdistrict-courier-option").empty();
                $("#zipcode-courier-option").empty();
                get_all_subdistrict_from_courier(response[0].Courier, response[0].Courier_Code, dis[0].District).done(function (subdis) {
                    var i = 0;
                    for(i ; i < subdis.length;i++){
                        $("#subdistrict-courier-option").append(`<option>${subdis[i].Sub_District}</option>`);
                        if(subdis[i].Zipcode.length > 0){
                            $("#zipcode-courier-option").append(`<option>${subdis[i].Zipcode}</option>`);
                        }
                    }
                    update_shipping_fee(subdis[0].Courier_Price_Code, "");
                    if(
                        $(`#address-selection`).find(":selected").text().toUpperCase() === `TO SAVED ADDRESS`
                    ){
                        change_city_selection_based_on_selected_province(document.getElementById("sub-saved-address"), $('#' + x.id).find(":selected").text());
                    }
                });
            });
        });
    }
    
    function updated_city_courier(x){
        var courier_information = $('#Courier-option').find(":selected").text().split("-");
        var Courier = courier_information[0];
        var Courier_Code = courier_information[1];
        var response = [{
            Courier : courier_information[0],
            Courier_Code : courier_information[1]
        }]
            $("#district-courier-option").empty();
            // alert($('#' + x.id).find(":selected").text());
            get_all_district_from_courier(response[0].Courier, response[0].Courier_Code, $('#' + x.id).find(":selected").text()).done(function (dis) {
                var i = 0;
                for(i ; i < dis.length;i++){
                    $("#district-courier-option").append(`<option>${dis[i].District}</option>`);
                }
                // 
                $("#subdistrict-courier-option").empty();
                $("#zipcode-courier-option").empty();
                get_all_subdistrict_from_courier(response[0].Courier, response[0].Courier_Code, dis[0].District).done(function (subdis) {
                    var i = 0;
                    for(i ; i < subdis.length;i++){
                        $("#subdistrict-courier-option").append(`<option>${subdis[i].Sub_District}</option>`);
                        if(subdis[i].Zipcode.length > 0){
                            $("#zipcode-courier-option").append(`<option>${subdis[i].Zipcode}</option>`);
                        }
                    }
                    update_shipping_fee(subdis[0].Courier_Price_Code, "");
                });
            });
    }
    
    function updated_district_courier(x){
        var courier_information = $('#Courier-option').find(":selected").text().split("-");
        var Courier = courier_information[0];
        var Courier_Code = courier_information[1];
        var response = [{
            Courier : courier_information[0],
            Courier_Code : courier_information[1]
        }]
                $("#subdistrict-courier-option").empty();
                $("#zipcode-courier-option").empty();
                get_all_subdistrict_from_courier(response[0].Courier, response[0].Courier_Code, $('#' + x.id).find(":selected").text()).done(function (subdis) {
                    var i = 0;
                    for(i ; i < subdis.length;i++){
                        $("#subdistrict-courier-option").append(`<option>${subdis[i].Sub_District}</option>`);
                        if(subdis[i].Zipcode.length > 0){
                            $("#zipcode-courier-option").append(`<option>${subdis[i].Zipcode}</option>`);
                        }
                    }
                    update_shipping_fee(subdis[0].Courier_Price_Code, "");
                });
    }
    
    function updated_subdistrict_courier(x){
        // 
    }

    function update_shipping_fee(Courier_Price_Code_dest, packaging){
        var estimated_weight = 0;
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const product = urlParams.get('productid');
        var estimated_volume_width = 0;
        var estimated_volume_height = 0;
        var estimated_volume_length = 0;
        var estimated_total_price = 0;
        loadingUpdateQuantity(10);
        getProductsWithProductNo("", "", product).done(function (response) {
            estimated_weight = estimated_weight + (response.Weight_KG * ($(".quantity-express-buy").val() * 1));
            if(estimated_weight <= 0 || estimated_weight == null || estimated_weight == undefined || isNaN(estimated_weight)){
                estimated_weight = 0.1*1.5;
            }else{
                estimated_weight = estimated_weight*1*1.5;
            }
            if(response.Dimension_CM_CUBIC != null || response.Dimension_CM_CUBIC != "null" || response.Dimension_CM_CUBIC != undefined || response.Dimension_CM_CUBIC != "yes" || response.Dimension_CM_CUBIC != "no"){
                var splitted_dimension = (response.Dimension_CM_CUBIC).split("*");
                estimated_volume_length = estimated_volume_length + (splitted_dimension[0] * ($(".quantity-express-buy").val() * 1));
                estimated_volume_width = estimated_volume_length + (splitted_dimension[1] * ($(".quantity-express-buy").val() * 1));
                estimated_volume_height = estimated_volume_length + (splitted_dimension[2] * ($(".quantity-express-buy").val() * 1));
            }else{
                estimated_volume_length = estimated_volume_length + (0.1*1.5 * ($(".quantity-express-buy").val() * 1));
                estimated_volume_width = estimated_volume_length + (0.1*1.5 * ($(".quantity-express-buy").val() * 1));
                estimated_volume_height = estimated_volume_length + (0.1*1.5 * ($(".quantity-express-buy").val() * 1));
            }
            if(isNaN(response.GroupBuy_SellPrice)){
                response.GroupBuy_SellPrice = 10000;
            }
            estimated_total_price = estimated_total_price + (response.GroupBuy_SellPrice * 1 * ($(".quantity-express-buy").val() * 1)); 
            loadingUpdateQuantity(5.5);
            if(packaging == "PACKING KAYU"){
                packaging = "PACKING_KAYU";
            }
            if(isNaN(estimated_volume_length)){
                estimated_volume_length = 0;
                estimated_volume_length = estimated_volume_length + (0.1*1.5 * ($(".quantity-express-buy").val() * 1));
            }
            if(isNaN(estimated_volume_width)){
                estimated_volume_width = 0;
                estimated_volume_width = estimated_volume_length + (0.1*1.5 * ($(".quantity-express-buy").val() * 1));
            }
            if(isNaN(estimated_volume_height)){
                estimated_volume_height = 0;
                estimated_volume_height = estimated_volume_length + (0.1*1.5 * ($(".quantity-express-buy").val() * 1));
            }
            // alert(Courier_Price_Code_dest);
            // alert(packaging);
            // alert(estimated_weight);
            // alert(estimated_volume_length);
            // alert(estimated_volume_width);
            // alert(estimated_volume_height);
            // alert(estimated_total_price);
            get_shipping_cost_informations("CGK01.00"
            , Courier_Price_Code_dest
            , packaging
            , `${estimated_weight}`
            , estimated_volume_length
            , estimated_volume_width
            , estimated_volume_height
            , estimated_total_price).done(function (response) {
                loadingUpdateQuantity(1);
                $("#shipping-fee-courier-option").empty();
                $("#shipping-insurance-courier-option").empty();
                var i = 0;
                if(response.service != undefined){
                    $("#shipping-insurance-courier-option").append(`<option>type 0 tidak berasuransi</option>`);
                    for(i ; i < response.service.length;i++){
                        $("#shipping-fee-courier-option").append(`<option>${response.service[i].EST_DAY}days ${response.service[i].SERVICE} ${response.service[i].TARIFF} ${response.service[i].DESCRIPTION}</option>`);
                        if(response.insurance[i] != undefined){
                            if(response.insurance[i].INSURANCE_TYPE != undefined
                                && response.insurance[i].INSURANCE_NAME != undefined
                                && response.insurance[i].INSURANCE_COST != undefined
                            ){
                                $("#shipping-insurance-courier-option").append(`<option>type ${response.insurance[i].INSURANCE_TYPE} ${response.insurance[i].INSURANCE_NAME} ${response.insurance[i].INSURANCE_COST}</option>`);
                            }
                        }
                        $("#shipping-packaging-courier-option").empty();
                        $("#shipping-packaging-courier-option").append(`<option>NORMAL</option>`);
                        if(response.packing[i] != undefined){
                            if(response.packing[i].PACKING_TYPE != undefined
                                && response.packing[i].PACKING_FEE != undefined
                            ){
                                $("#shipping-packaging-courier-option").append(`<option>${response.packing[i].PACKING_TYPE} ${response.packing[i].PACKING_FEE}</option>`);
                            }
                        }
                    }
                    update_estimated_shipping_fee();
                }
            });
        });
    }

    function pallet_packaging_request(){
        loadingUpdateQuantity(10);
        if($('#shipping-packaging-courier-option').find(":selected").text() == "PACKING KAYU"){
            // alert("HERE KAYU");
            var courier_information = $('#Courier-option').find(":selected").text().split("-");
            var Courier = courier_information[0];
            var Courier_Code = courier_information[1];
            var response = [{
                Courier : courier_information[0],
                Courier_Code : courier_information[1]
            }]
            $("#subdistrict-courier-option").empty();
            $("#zipcode-courier-option").empty();
            get_all_subdistrict_from_courier(response[0].Courier, response[0].Courier_Code, $("#subdistrict-courier-option").find(":selected").text()).done(function (subdis) {
                var i = 0;
                for(i ; i < subdis.length;i++){
                    $("#subdistrict-courier-option").append(`<option>${subdis[i].Sub_District}</option>`);
                    if(subdis[i].Zipcode.length > 0){
                        $("#zipcode-courier-option").append(`<option>${subdis[i].Zipcode}</option>`);
                    }
                }
                update_shipping_fee(subdis[0].Courier_Price_Code, "PACKING KAYU");
            });
        }else{
            var courier_information = $('#Courier-option').find(":selected").text().split("-");
            var Courier = courier_information[0];
            var Courier_Code = courier_information[1];
            var response = [{
                Courier : courier_information[0],
                Courier_Code : courier_information[1]
            }]
            $("#subdistrict-courier-option").empty();
            $("#zipcode-courier-option").empty();
            get_all_subdistrict_from_courier(response[0].Courier, response[0].Courier_Code, $("#subdistrict-courier-option").find(":selected").text()).done(function (subdis) {
                var i = 0;
                for(i ; i < subdis.length;i++){
                    $("#subdistrict-courier-option").append(`<option>${subdis[i].Sub_District}</option>`);
                    if(subdis[i].Zipcode.length > 0){
                        $("#zipcode-courier-option").append(`<option>${subdis[i].Zipcode}</option>`);
                    }
                }
                update_shipping_fee(subdis[0].Courier_Price_Code, "");
            });
        }
    }

    function update_estimated_shipping_fee(){
        var courier_information = $('#shipping-fee-courier-option').find(":selected").text().split(" ");
        var insurance_information = $('#shipping-insurance-courier-option').find(":selected").text().split(" ");
        var packing_information = $('#shipping-packaging-courier-option').find(":selected").text().split(" ");
        if(insurance_information[1] != "0"){
            var total_fee = courier_information[2]*1 + insurance_information[insurance_information.length -1]*1;
            if(packing_information[0] == "PACKING KAYU"){
                total_fee = total_fee + (packing_information[1]*1);
            }
            $("#estimated-price-courier-option").html(`${total_fee}`);
        }else{
            var total_fee = 0;
            if(packing_information[0] == "PACKING KAYU"){
                total_fee = total_fee + (courier_information[2]*1) + (packing_information[1]*1);
            }else{
                total_fee = total_fee + (courier_information[2]*1);
            }
            $("#estimated-price-courier-option").html(`${total_fee}`);
        }
    }
    
    setInterval(() => {
        update_estimated_shipping_fee();
        update_total_price_of_group_buy();
    }, 1000);

    function update_total_price_of_group_buy(){
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const product = urlParams.get('productid');
        getProductsWithProductNo("", "", product).done(function (response) {
            $("#estimated-product-price").val(
                (response.GroupBuy_SellPrice * ($(".quantity-express-buy").val() * 1)) + " IDR"
            );
        });
    }

    function loadingUpdateQuantity(timerMultiplier){
        let timerInterval
        Swal.fire({
        title: `<div class="yusuf-loader-area">
    <div class="yusuf-loader"></div>
 </div>`,
        html: ``,
        timer: timerMultiplier*1000,
        timerProgressBar: true,
        customClass: 'swal-custom',
        allowOutsideClick: false,
        didOpen: () => {
            Swal.showLoading()
            timerInterval = setInterval(() => {
            const content = Swal.getContent()
            }, 100)
        },
        willClose: () => {
            clearInterval(timerInterval)
        }
        }).then((result) => {
            /* Read more about handling dismissals below */
            if (result.dismiss === Swal.DismissReason.timer) {
                // 
            }
        })
    }

</script>
</html>